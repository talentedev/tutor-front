<div class="classes" flex layout="column">
    <div *ngIf="perMonth" class="header" layout="row" layout-align="center center">
        <div layout="row" class="navigate" layout-align="center center">
            <a (click)="navigate(-1)">
                <mat-icon svgIcon="arrow-left"></mat-icon>
            </a>
            <div>{{date.format('MMMM YYYY')}}</div>
            <a (click)="navigate(1)">
                <mat-icon svgIcon="arrow-right"></mat-icon>
            </a>
        </div>
        <div flex></div>
        <a routerLink="/main/account/lessons">See Lesson History</a>
    </div>

    <ul class="list" flex *ngIf="!working && lessons !== null && lessons.length > 0" [class.paginated]="paginated">
        <ng-container *ngFor="let lesson of lessons; let ix = index;">
            <li layout="row" layout-align="center center" [class.clickable]="interactive || lesson.state === 2" (click)="onLessonClick(ix)">
                <div class="date">
                    {{lesson.starts_at.format('MMM').toUpperCase()}}
                    {{lesson.starts_at.format(' DD')}}
                </div>

                <div class="info" flex>
                    <div class="subject">{{lesson.subject.name}}</div>
                    <div class="whenwhere">
                        <span>{{lesson.starts_at.format('h:mma')}} to {{lesson.ends_at.format('h:mma')}},</span>
                        <span *ngIf="lesson.meet === 2">Online</span>
                        <span *ngIf="lesson.meet === 4">{{lesson.location}}</span>
                    </div>
                </div>

                <ng-container [ngSwitch]="lesson.state">
                    <div *ngSwitchCase="0" class="status pending">
                        <mat-icon svgIcon="time" color="learnt-dark"></mat-icon>
                        <span>Pending</span>
                    </div>
                    <div *ngSwitchCase="1" class="status confirmed">
                        <mat-icon svgIcon="tick" color="learnt-white"></mat-icon>
                        <span>Confirmed</span>
                    </div>
                    <div *ngSwitchCase="2" class="status progress">
                        <mat-icon svgIcon="circle-tick" color="learnt-dark"></mat-icon>
                        <span>Progress</span>
                    </div>
                    <div *ngSwitchCase="3" class="status completed">
                        <mat-icon svgIcon="tick" color="learnt-dark"></mat-icon>
                        <span>Completed</span>
                    </div>
                    <div *ngSwitchCase="4" class="status cancelled">
                        <mat-icon svgIcon="close" color="learnt-white"></mat-icon>
                        <span>Cancelled</span>
                    </div>
                </ng-container>
            </li>

            <li #lessonMenuElem layout="row" layout-align="center center" class="lesson-menu" [class.visible]="lessonMenu === ix">
                <button mat-raised-button (click)="editLesson(lesson)" [disabled]="!canBeModified(lesson)">Edit Class</button>
                <button mat-raised-button (click)="cancelLesson(lesson)" [disabled]="!canBeCancelled(lesson)">Cancel Class</button>
            </li>
        </ng-container>
    </ul>

    <learnt-pagination *ngIf="paginated" [pages]="pages" (page)="getPage($event)"></learnt-pagination>

    <div class="empty-list" flex *ngIf="!working && (!lessons || lessons.length == 0)" layout="row" layout-align="start center">
        <div layout="row" layout-align="center center">
            <svg width="57px" height="57px" viewBox="0 0 57 57">
                <g id="Pages" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                    <g id="Desktop---02-Dashboard-Empty" transform="translate(-304.000000, -576.000000)">
                        <g id="Activity" transform="translate(239.000000, 442.000000)">
                            <g id="illustration" transform="translate(66.000000, 135.000000)">
                                <g id="icon">
                                    <circle id="Oval" stroke-opacity="0.3" stroke="#89C0CA" stroke-width="0.5" cx="27.5" cy="27.5" r="27.5"></circle>
                                    <path
                                        d="M23.2,28.5625 L24.2666667,28.5625 L24.2666667,27.5 L23.2,27.5 L23.2,28.5625 Z M23.2,32.8125 L24.2666667,32.8125 L24.2666667,31.75 L23.2,31.75 L23.2,32.8125 Z M31.7333333,32.8125 L32.8,32.8125 L32.8,31.75 L31.7333333,31.75 L31.7333333,32.8125 Z M27.4666667,32.8125 L28.5333333,32.8125 L28.5333333,31.75 L27.4666667,31.75 L27.4666667,32.8125 Z M31.7333333,28.5625 L32.8,28.5625 L32.8,27.5 L31.7333333,27.5 L31.7333333,28.5625 Z M33.8666667,20.0625 L31.7333333,20.0625 L31.7333333,19.53125 C31.7333333,19.3873684 31.6805568,19.2628582 31.5749995,19.1577154 C31.4694443,19.0525704 31.3444459,19 31.2,19 C31.0555541,19 30.9305557,19.0525704 30.8250005,19.1577154 C30.7194432,19.2628582 30.6666667,19.3873684 30.6666667,19.53125 L30.6666667,20.0625 L25.3333333,20.0625 L25.3333333,19.53125 C25.3333333,19.3873684 25.2805568,19.2628582 25.1749995,19.1577154 C25.0694443,19.0525704 24.9444459,19 24.8,19 C24.6555541,19 24.5305557,19.0525704 24.4250005,19.1577154 C24.3194432,19.2628582 24.2666667,19.3873684 24.2666667,19.53125 L24.2666667,20.0625 L22.1333333,20.0625 C21.5444416,20.0625 21.0416687,20.2700169 20.6250001,20.6850591 C20.2083312,21.1000992 20,21.6009086 20,22.1875 L20,33.875 C20,34.4615914 20.2083312,34.9624003 20.6250001,35.3774413 C21.0416687,35.7924826 21.5444416,36 22.1333333,36 L33.8666667,36 C34.4555584,36 34.9583317,35.7924826 35.3749995,35.3774413 C35.7916693,34.9624003 36,34.4615914 36,33.875 L36,22.1875 C36,21.6009086 35.7916693,21.1000992 35.3749995,20.6850591 C34.9583317,20.2700169 34.4555584,20.0625 33.8666667,20.0625 Z M25.3333333,32.8125 C25.3333333,33.1002611 25.2277781,33.3492835 25.0166656,33.5595692 C24.8055552,33.7698571 24.5555563,33.875 24.2666667,33.875 L23.2,33.875 C22.9111104,33.875 22.6611115,33.7698571 22.4500011,33.5595692 C22.2388885,33.3492835 22.1333333,33.1002611 22.1333333,32.8125 L22.1333333,31.75 C22.1333333,31.4622389 22.2388885,31.2132165 22.4500011,31.0029308 C22.6611115,30.7926429 22.9111104,30.6875 23.2,30.6875 L24.2666667,30.6875 C24.5555563,30.6875 24.8055552,30.7926429 25.0166656,31.0029308 C25.2277781,31.2132165 25.3333333,31.4622389 25.3333333,31.75 L25.3333333,32.8125 Z M25.3333333,28.5625 C25.3333333,28.8502611 25.2277781,29.0992835 25.0166656,29.3095692 C24.8055552,29.5198571 24.5555563,29.625 24.2666667,29.625 L23.2,29.625 C22.9111104,29.625 22.6611115,29.5198571 22.4500011,29.3095692 C22.2388885,29.0992835 22.1333333,28.8502611 22.1333333,28.5625 L22.1333333,27.5 C22.1333333,27.2122389 22.2388885,26.9632165 22.4500011,26.7529307 C22.6611115,26.5426429 22.9111104,26.4375 23.2,26.4375 L24.2666667,26.4375 C24.5555563,26.4375 24.8055552,26.5426429 25.0166656,26.7529307 C25.2277781,26.9632165 25.3333333,27.2122389 25.3333333,27.5 L25.3333333,28.5625 Z M29.6,32.8125 C29.6,33.1002611 29.4944448,33.3492835 29.2833323,33.5595692 C29.0722219,33.7698571 28.8222229,33.875 28.5333333,33.875 L27.4666667,33.875 C27.1777771,33.875 26.9277781,33.7698571 26.7166677,33.5595692 C26.5055552,33.3492835 26.4,33.1002611 26.4,32.8125 L26.4,31.75 C26.4,31.4622389 26.5055552,31.2132165 26.7166677,31.0029308 C26.9277781,30.7926429 27.1777771,30.6875 27.4666667,30.6875 L28.5333333,30.6875 C28.8222229,30.6875 29.0722219,30.7926429 29.2833323,31.0029308 C29.4944448,31.2132165 29.6,31.4622389 29.6,31.75 L29.6,32.8125 Z M29.6,28.5625 C29.6,28.8502611 29.4944448,29.0992835 29.2833323,29.3095692 C29.0722219,29.5198571 28.8222229,29.625 28.5333333,29.625 L27.4666667,29.625 C27.1777771,29.625 26.9277781,29.5198571 26.7166677,29.3095692 C26.5055552,29.0992835 26.4,28.8502611 26.4,28.5625 L26.4,27.5 C26.4,27.2122389 26.5055552,26.9632165 26.7166677,26.7529307 C26.9277781,26.5426429 27.1777771,26.4375 27.4666667,26.4375 L28.5333333,26.4375 C28.8222229,26.4375 29.0722219,26.5426429 29.2833323,26.7529307 C29.4944448,26.9632165 29.6,27.2122389 29.6,27.5 L29.6,28.5625 Z M33.8666667,32.8125 C33.8666667,33.1002611 33.7611115,33.3492835 33.5499989,33.5595692 C33.3388885,33.7698571 33.0888896,33.875 32.8,33.875 L31.7333333,33.875 C31.4444437,33.875 31.1944448,33.7698571 30.9833344,33.5595692 C30.7722219,33.3492835 30.6666667,33.1002611 30.6666667,32.8125 L30.6666667,31.75 C30.6666667,31.4622389 30.7722219,31.2132165 30.9833344,31.0029308 C31.1944448,30.7926429 31.4444437,30.6875 31.7333333,30.6875 L32.8,30.6875 C33.0888896,30.6875 33.3388885,30.7926429 33.5499989,31.0029308 C33.7611115,31.2132165 33.8666667,31.4622389 33.8666667,31.75 L33.8666667,32.8125 Z M33.8666667,28.5625 C33.8666667,28.8502611 33.7611115,29.0992835 33.5499989,29.3095692 C33.3388885,29.5198571 33.0888896,29.625 32.8,29.625 L31.7333333,29.625 C31.4444437,29.625 31.1944448,29.5198571 30.9833344,29.3095692 C30.7722219,29.0992835 30.6666667,28.8502611 30.6666667,28.5625 L30.6666667,27.5 C30.6666667,27.2122389 30.7722219,26.9632165 30.9833344,26.7529307 C31.1944448,26.5426429 31.4444437,26.4375 31.7333333,26.4375 L32.8,26.4375 C33.0888896,26.4375 33.3388885,26.5426429 33.5499989,26.7529307 C33.7611115,26.9632165 33.8666667,27.2122389 33.8666667,27.5 L33.8666667,28.5625 Z M34.9333333,23.25 L21.0666667,23.25 L21.0666667,22.1875 C21.0666667,21.8997389 21.1722212,21.6507165 21.3833333,21.4404307 C21.5944454,21.2301429 21.8444431,21.125 22.1333333,21.125 L24.2666667,21.125 L24.2666667,21.65625 C24.2666667,21.8001316 24.3194432,21.9246417 24.4250005,22.0297846 C24.5305557,22.1349296 24.6555541,22.1875 24.8,22.1875 C24.9444459,22.1875 25.0694443,22.1349296 25.1749995,22.0297846 C25.2805568,21.9246417 25.3333333,21.8001316 25.3333333,21.65625 L25.3333333,21.125 L30.6666667,21.125 L30.6666667,21.65625 C30.6666667,21.8001316 30.7194432,21.9246417 30.8250005,22.0297846 C30.9305557,22.1349296 31.0555541,22.1875 31.2,22.1875 C31.3444459,22.1875 31.4694443,22.1349296 31.5749995,22.0297846 C31.6805568,21.9246417 31.7333333,21.8001316 31.7333333,21.65625 L31.7333333,21.125 L33.8666667,21.125 C34.1555563,21.125 34.4055552,21.2301429 34.6166656,21.4404307 C34.8277781,21.6507165 34.9333333,21.8997389 34.9333333,22.1875 L34.9333333,23.25 Z M27.4666667,28.5625 L28.5333333,28.5625 L28.5333333,27.5 L27.4666667,27.5 L27.4666667,28.5625 Z"
                                        id="Page-1" fill="#89C0CA"></path>
                                </g>
                            </g>
                        </g>
                    </g>
                </g>
            </svg>
            <span>No activity.</span>
        </div>
    </div>

    <div class="working" flex *ngIf="working" layout="row" layout-align="center center">
        <learnt-spinner></learnt-spinner>
    </div>
</div>
